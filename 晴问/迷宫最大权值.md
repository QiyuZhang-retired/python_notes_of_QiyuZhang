# 迷宫最大权值
**算法核心：深度优先搜索**  
在矩阵最大权值基础上附加判断条件
```python
def dfs(x,y,summary):
    global max_summary,maze

    for dx,dy in ((-1,0),(1,0),(0,-1),(0,1)):
        nx=x+dx
        ny=y+dy

        if values[nx][ny]=='end':
            max_summary=max(max_summary,summary)
        else:
            if not visited[nx][ny] and maze[nx][ny]==0:
                visited[nx][ny]=True
                dfs(nx,ny,summary+values[nx][ny])
                visited[nx][ny]=False

    return


n,m=map(int,input().split())
maze=[]
maze.append([1]*(m+2))
for _ in range(n):
    maze.append([1]+list(map(int,input().split()))+[1])
maze.append([1]*(m+2))

values=[]
values.append([1]*(m+2))
for _ in range(n):
    values.append([1]+list(map(int,input().split()))+[1])
values.append([1]*(m+2))

end_num=values[n][m]
values[n][m]='end'

#生成visited鼠标来标记是否到达
visited=[[True]*(m+2)]+[[True]+[False]*m+[True] for _ in range(n)]+[[True]*(m+2)]
visited[1][1]=True
max_summary=float('-inf')
dfs(1,1,values[1][1])
print(max_summary+end_num)
```
https://sunnywhy.com/sfbj/8/1/317
